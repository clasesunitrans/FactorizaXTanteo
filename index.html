<!DOCTYPE html>
<html lang="es">
<head>
    <!--                Generado por Gemini 2.5 Flash   -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Factorizaci√≥n por Tanteo</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- MathJax for LaTeX rendering -->
    <!-- MathJax configuration: Must be placed before the MathJax script -->
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(to right, #f0f9ff, #e0f2fe); /* Light blue gradient background */
        }
        .btn-primary {
            background: linear-gradient(to right, #f7b533, #f59e0b); /* Orange gradient */
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px; /* Fully rounded */
            font-weight: 600;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease-in-out;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }
        .btn-secondary {
            background: linear-gradient(to right, #73c2fb, #3b82f6); /* Blue gradient */
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            font-weight: 600;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease-in-out;
        }
        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }
        .card {
            background-color: white;
            border-radius: 1rem; /* Rounded corners */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            padding: 2rem;
            margin-bottom: 1.5rem;
        }
        .warning-box {
            background-color: #fef3c7; /* Light yellow */
            border-left: 4px solid #f59e0b; /* Orange border */
            color: #92400e; /* Dark orange text */
            padding: 1rem;
            border-radius: 0.5rem;
            margin-top: 1rem;
        }
        .info-box {
            background-color: #e0f2fe; /* Light blue */
            border-left: 44px solid #3b82f6; /* Blue border */
            color: #1e40af; /* Dark blue text */
            padding: 1rem;
            border-radius: 0.5rem;
            margin-top: 1rem;
        }
        .quiz-answer {
            background-color: #ecfdf5; /* Light green */
            border-left: 4px solid #10b981; /* Green border */
            color: #065f46; /* Dark green text */
            padding: 1rem;
            border-radius: 0.5rem;
            margin-top: 0.5rem;
            display: none; /* Hidden by default */
        }
        .math-display {
            background-color: #f8fafc;
            padding: 1rem;
            border-radius: 0.75rem;
            margin-top: 1rem;
            margin-bottom: 1rem;
            text-align: center;
            font-size: 1.25rem;
            overflow-x: auto; /* Allow horizontal scrolling for long equations */
        }
        footer {
      margin-top: 3em;
      text-align: center;
      font-size: 0.9em;
      color: #888;
    }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center py-8 px-4">

    <div class="max-w-4xl w-full">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">
                <span class="text-orange-500">¬°Aprende</span> Factorizaci√≥n por Tanteo! <span class="text-blue-500">üöÄ</span>
            </h1>
            <p class="text-lg text-gray-600">Un curso interactivo para dominar $x^2 + bx + c$</p>
        </header>

        <main id="tutorial-content" class="card">
            <!-- Content will be injected here by JavaScript -->
        </main>

        <div class="flex justify-between mt-6 px-4">
            <button id="prev-btn" class="btn-secondary flex items-center">
                <i class="fas fa-arrow-left mr-2"></i> Anterior
            </button>
            <button id="next-btn" class="btn-primary flex items-center">
                Siguiente <i class="fas fa-arrow-right ml-2"></i>
            </button>
        </div>
    </div>
  <footer>
    &copy; 2025 fmartinezb@gmail.com
  </footer>
    <script>
        // Ensure MathJax is ready before rendering
        // Using window.onload to ensure all resources, including async scripts, are loaded.
        window.onload = () => {
            if (typeof MathJax !== 'undefined') {
                MathJax.startup.promise.then(() => {
                    console.log('MathJax is loaded and ready.');
                    renderStep(); // Initial render after MathJax is ready
                }).catch(err => console.error('MathJax startup failed:', err));
            } else {
                console.error('MathJax not found. Please check the CDN link.');
                renderStep(); // Render without MathJax if it fails to load
            }
        };

        let currentStep = 0;

        const tutorialSteps = [
            {
                title: '1. ¬°Hola, futuro Ingeniero! üëã',
                icon: 'üåü',
                content: `
                    <p class="text-gray-700 mb-4">
                        Hoy vamos a aprender una t√©cnica s√∫per √∫til para simplificar expresiones algebraicas: la <strong>factorizaci√≥n por tanteo</strong>.
                        Espec√≠ficamente, nos enfocaremos en trinomios de la forma $x^2 + bx + c$.
                    </p>
                    <div class="info-box">
                        <p class="font-semibold mb-2">¬øQu√© es un trinomio?</p>
                        <p>Es una expresi√≥n algebraica con tres t√©rminos, como $x^2 + 5x + 6$.</p>
                    </div>
                    <div class="mt-4 text-center">
                        <img src="https://placehold.co/300x200/73c2fb/ffffff?text=Concepto+de+Trinomio" alt="Representaci√≥n de un trinomio y sus partes" class="mx-auto rounded-lg shadow-md">
                    </div>
                `
            },
            {
                title: '2. La Regla de Oro ü•á',
                icon: 'üí°',
                content: `
                    <p class="text-gray-700 mb-4">
                        Para factorizar un trinomio de la forma $x^2 + bx + c$, necesitamos encontrar dos n√∫meros, llam√©moslos $N_1$ y $N_2$, que cumplan dos condiciones m√°gicas:
                    </p>
                    <ul class="list-disc list-inside text-gray-700 space-y-2 mb-4">
                        <li><strong>Condici√≥n 1 (Multiplicaci√≥n):</strong> Cuando $N_1$ y $N_2$ se multiplican, el resultado debe ser igual a $c$.
                            <div class="math-display">
                                $N_1  *  N_2 = c$
                            </div>
                        </li>
                        <li><strong>Condici√≥n 2 (Suma):</strong> Cuando $N_1$ y $N_2$ se suman, el resultado debe ser igual a $b$.
                            <div class="math-display">
                                $N_1 + N_2 = b$
                            </div>
                        </li>
                    </ul>
                    <p class="text-gray-700">
                        Si encontramos esos dos n√∫meros, ¬°bingo! La factorizaci√≥n ser√°:
                    </p>
                    <div class="math-display">
                        $(x + N_1)(x + N_2)$
                    </div>
                    <div class="info-box">
                        <p class="font-semibold mb-2">¬°Recuerda!</p>
                        <p>El coeficiente de $x^2$ debe ser 1 para usar este m√©todo de tanteo directamente.</p>
                    </div>
                `
            },
            {
                title: '3. Ejemplo 1: $x^2 + 5x + 6$ ‚ú®',
                icon: '‚ûï',
                content: `
                    <p class="text-gray-700 mb-4">
                        Vamos a factorizar el trinomio $x^2 + 5x + 6$.
                    </p>
                    <p class="text-gray-700 mb-2">
                        Aqu√≠, $b = 5$ y $c = 6$.
                    </p>
                    <h3 class="text-xl font-semibold text-gray-800 mt-4 mb-2">Paso 1: Encontrar los divisores de $c$ (que es 6)</h3>
                    <p class="text-gray-700 mb-2">
                        Los pares de n√∫meros que multiplicados dan 6 son:
                    </p>
                    <ul class="list-disc list-inside text-gray-700 mb-4">
                        <li>1 y 6</li>
                        <li>2 y 3</li>
                        <li>-1 y -6</li>
                        <li>-2 y -3</li>
                    </ul>
                    <h3 class="text-xl font-semibold text-gray-800 mt-4 mb-2">Paso 2: Sumar los pares para encontrar $b$ (que es 5)</h3>
                    <ul class="list-disc list-inside text-gray-700 mb-4">
                        <li>$1 + 6 = 7$ (No) ‚ùå</li>
                        <li>$2 + 3 = 5$ (¬°S√≠!) ‚úÖ</li>
                        <li>$-1 + (-6) = -7$ (No) ‚ùå</li>
                        <li>$-2 + (-3) = -5$ (No) ‚ùå</li>
                    </ul>
                    <p class="text-gray-700 mb-4">
                        ¬°Encontramos nuestros n√∫meros! $N_1 = 2$ y $N_2 = 3$.
                    </p>
                    <h3 class="text-xl font-semibold text-gray-800 mt-4 mb-2">Paso 3: Escribir la factorizaci√≥n</h3>
                    <p class="text-gray-700">
                        Usando la forma $(x + N_1)(x + N_2)$, obtenemos:
                    </p>
                    <div class="math-display">
                        $(x + 2)(x + 3)$
                    </div>
                    <div class="info-box">
                        <p class="font-semibold mb-2">¬°Verificaci√≥n R√°pida!</p>
                        <p>Puedes multiplicar $(x+2)(x+3)$ para asegurarte: $x^2 + 3x + 2x + 6 = x^2 + 5x + 6$. ¬°Funciona!</p>
                    </div>
                `
            },
            {
                title: '4. Ejemplo 2: $x^2 - 13x + 30$ ‚ûñ',
                icon: '‚ûñ',
                content: `
                    <p class="text-gray-700 mb-4">
                        Ahora, un ejemplo con signos diferentes: $x^2 - 13x + 30$.
                    </p>
                    <p class="text-gray-700 mb-2">
                        Aqu√≠, $b = -13$ y $c = 30$.
                    </p>
                    <h3 class="text-xl font-semibold text-gray-800 mt-4 mb-2">Paso 1: Encontrar los divisores de $c$ (que es 30)</h3>
                    <p class="text-gray-700 mb-2">
                        Necesitamos dos n√∫meros que multiplicados den $+30$ y sumados den $-13$.
                        Si el producto ($c$) es positivo y la suma ($b$) es negativa, ¬°ambos n√∫meros deben ser negativos!
                    </p>
                    <div class="warning-box mb-4">
                        <p class="font-semibold mb-2">¬°Cuidado con los signos! üö®</p>
                        <ul class="list-disc list-inside">
                            <li>Si $c$ es positivo (+) y $b$ es positivo (+), ambos n√∫meros ($N_1, N_2$) son positivos.</li>
                            <li>Si $c$ es positivo (+) y $b$ es negativo (-), ambos n√∫meros ($N_1, N_2$) son negativos.</li>
                            <li>Si $c$ es negativo (-), un n√∫mero es positivo (+) y el otro es negativo (-). El signo del n√∫mero mayor (en valor absoluto) ser√° el mismo que el signo de $b$.</li>
                        </ul>
                    </div>
                    <p class="text-gray-700 mb-2">
                        Pares de n√∫meros negativos que multiplicados dan 30:
                    </p>
                    <ul class="list-disc list-inside text-gray-700 mb-4">
                        <li>-1 y -30</li>
                        <li>-2 y -15</li>
                        <li>-3 y -10</li>
                        <li>-5 y -6</li>
                    </ul>
                    <h3 class="text-xl font-semibold text-gray-800 mt-4 mb-2">Paso 2: Sumar los pares para encontrar $b$ (que es -13)</h3>
                    <ul class="list-disc list-inside text-gray-700 mb-4">
                        <li>$-1 + (-30) = -31$ (No) ‚ùå</li>
                        <li>$-2 + (-15) = -17$ (No) ‚ùå</li>
                        <li>$-3 + (-10) = -13$ (¬°S√≠!) ‚úÖ</li>
                        <li>$-5 + (-6) = -11$ (No) ‚ùå</li>
                    </ul>
                    <p class="text-gray-700 mb-4">
                        ¬°Encontramos nuestros n√∫meros! $N_1 = -3$ y $N_2 = -10$.
                    </p>
                    <h3 class="text-xl font-semibold text-gray-800 mt-4 mb-2">Paso 3: Escribir la factorizaci√≥n</h3>
                    <p class="text-gray-700">
                        Usando la forma $(x + N_1)(x + N_2)$, obtenemos:
                    </p>
                    <div class="math-display">
                        $(x - 3)(x - 10)$
                    </div>
                    <div class="info-box">
                        <p class="font-semibold mb-2">¬°Verificaci√≥n R√°pida!</p>
                        <p>Multiplica $(x-3)(x-10)$ para asegurarte: $x^2 - 10x - 3x + 30 = x^2 - 13x + 30$. ¬°Perfecto!</p>
                    </div>
                `
            },
            {
                title: '5. El M√©todo CPR¬≥ üß†',
                icon: 'üéØ',
                content: `
                    <p class="text-gray-700 mb-4">
                        Para resolver cualquier problema de matem√°ticas, y en particular los de factorizaci√≥n, te recomendamos usar el m√©todo <strong>CPR¬≤</strong>:
                    </p>
                    <ul class="list-disc list-inside text-gray-700 space-y-3 mb-4">
                        <li>
                            <strong class="text-blue-600">C</strong>omprender:
                            <p class="ml-4">Lee el problema cuidadosamente. ¬øQu√© te piden? ¬øQu√© informaci√≥n tienes? ¬øQu√© tipo de expresi√≥n es? (Por ejemplo, un trinomio $x^2 + bx + c$).</p>
                        </li>
                        <li>
                            <strong class="text-orange-600">P</strong>lanificar:
                            <p class="ml-4">Decide qu√© algoritmo o m√©todo aplicar. En este caso, si es un trinomio de la forma $x^2 + bx + c$, planifica usar la factorizaci√≥n por tanteo. Piensa en los pasos: encontrar N1 y N2, considerar los signos.</p>
                        </li>
                        <li>
                            <strong class="text-blue-600">R</strong>esolver:
                            <p class="ml-4">Aplica el algoritmo paso a paso. Realiza los c√°lculos para encontrar $N_1$ y $N_2$, y escribe la factorizaci√≥n final.</p>
                        </li>
                        <li>
                            <strong class="text-orange-600">R</strong>evisar:
                            <p class="ml-4">Comprueba tu respuesta. ¬øPuedes multiplicar los factores para obtener el trinomio original? ¬øTiene sentido tu resultado? ¬°No te saltes este paso!</p>
                        </li>
                                               <li>
                            <strong class="text-blue-600">R</strong>eflexionar:
                            <p class="ml-4">Reflexiona sobre el Proceso: Eval√∫a el proceso y considera posibles mejoras.!</p>
                        </li>
 
                    </ul>
                    <div class="info-box">
                        <p class="font-semibold mb-2">¬°Practica CPR¬≥!</p>
                        <p>Este m√©todo te ayudar√° a abordar cualquier desaf√≠o matem√°tico de manera organizada y efectiva. ¬°Es tu superpoder para resolver problemas! üí™</p>
                    </div>
                `
            },
            {
                title: '6. Cuestionario de Pr√°ctica üìù',
                icon: '‚ùì',
                content: `
                    <p class="text-gray-700 mb-4">
                        ¬°Es hora de practicar! Intenta resolver estas ecuaciones y problemas aplicando lo que has aprendido y el m√©todo CPR¬≥.
                    </p>
                    <h3 class="text-xl font-semibold text-gray-800 mt-4 mb-2">Ecuaciones:</h3>
                    <ol class="list-decimal list-inside text-gray-700 space-y-3 mb-6">
                        <li>$x^2 + 7x + 10$</li>
                        <li>$x^2 - 9x + 20$</li>
                        <li>$x^2 + 2x - 15$</li>
                        <li>$x^2 - 4x - 12$</li>
                        <li>$x^2 + 11x + 28$</li>
                        <li>$x^2 - 10x + 21$</li>
                        <li>$x^2 + x - 2$</li>
                    </ol>

                    <h3 class="text-xl font-semibold text-gray-800 mt-4 mb-2">Problemas:</h3>
                    <ol class="list-decimal list-inside text-gray-700 space-y-3 mb-6" start="8">
                        <li>
                            El √°rea de un jard√≠n rectangular se expresa como $x^2 + 8x + 15$ metros cuadrados.
                            Si el ancho del jard√≠n es $(x+3)$ metros, ¬øcu√°l es la expresi√≥n para su largo?
                        </li>
                        <li>
                            Un terreno cuadrado tiene un √°rea de $x^2 - 14x + 49$ metros cuadrados.
                            ¬øCu√°l es la expresi√≥n para la longitud de uno de sus lados?
                        </li>
                        <li>
                            La cantidad de estudiantes en un club de matem√°ticas se puede representar por
                            $(x+4)$, y la cantidad de libros que cada estudiante tiene es $(x+5)$.
                            Si el total de libros es $x^2 + 9x + 20$, ¬øes correcta esta representaci√≥n?
                            Explica por qu√©.
                        </li>
                    </ol>

                    <button id="toggle-answers-btn" class="btn-secondary mt-4 flex items-center">
                        Mostrar/Ocultar Respuestas <i class="fas fa-eye ml-2"></i>
                    </button>

                    <div id="quiz-answers" class="mt-4">
                        <h3 class="text-xl font-semibold text-gray-800 mt-4 mb-2">Respuestas:</h3>
                        <ol class="list-decimal list-inside text-gray-700 space-y-3">
                            <li class="quiz-answer">$(x+5)(x+2)$</li>
                            <li class="quiz-answer">$(x-5)(x-4)$</li>
                            <li class="quiz-answer">$(x+5)(x-3)$</li>
                            <li class="quiz-answer">$(x-6)(x+2)$</li>
                            <li class="quiz-answer">$(x+7)(x+4)$</li>
                            <li class="quiz-answer">$(x-7)(x-3)$</li>
                            <li class="quiz-answer">$(x+2)(x-1)$</li>
                            <li class="quiz-answer">El largo es $(x+5)$ metros. (Ya que $(x+3)(x+5) = x^2 + 8x + 15$)</li>
                            <li class="quiz-answer">La longitud del lado es $(x-7)$ metros. (Ya que $(x-7)(x-7) = x^2 - 14x + 49$)</li>
                            <li class="quiz-answer">S√≠, es correcta. Al multiplicar $(x+4)(x+5)$ se obtiene $x^2 + 9x + 20$.</li>
                        </ol>
                    </div>
                `
            },
            {
                title: '7. Generador de Ejercicios al Azar üé≤',
                icon: 'üîÑ',
                content: `
                    <p class="text-gray-700 mb-4">
                        ¬°Nunca dejes de practicar! Usa este generador para crear nuevos trinomios y seguir mejorando tus habilidades de factorizaci√≥n.
                    </p>
                    <button id="generate-exercise-btn" class="btn-primary mt-4 flex items-center">
                        Generar Nuevo Ejercicio <i class="fas fa-dice ml-2"></i>
                    </button>
                    <div id="random-exercise-display" class="card mt-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">Tu Ejercicio Aleatorio:</h3>
                        <div class="math-display text-2xl font-bold mb-4" id="generated-trinomial">
                            Presiona "Generar Nuevo Ejercicio"
                        </div>
                        <p class="text-gray-700 mb-2">
                            ¬°Recuerda aplicar el m√©todo <strong class="text-blue-500">CPR¬≥</strong> para resolverlo!
                        </p>
                        <button id="show-random-answer-btn" class="btn-secondary mt-4 flex items-center">
                            Mostrar/Ocultar Soluci√≥n <i class="fas fa-lightbulb ml-2"></i>
                        </button>
                        <div id="random-exercise-answer" class="quiz-answer mt-4">
                            <!-- Answer will be displayed here -->
                        </div>
                    </div>
                `
            }
        ];

        const tutorialContent = document.getElementById('tutorial-content');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');

        function renderStep() {
            const step = tutorialSteps[currentStep];
            tutorialContent.innerHTML = `
                <h2 class="text-3xl font-bold text-gray-800 mb-4 flex items-center">
                    ${step.icon} <span class="ml-3">${step.title}</span>
                </h2>
                ${step.content}
            `;

            // Update button states
            prevBtn.disabled = currentStep === 0;
            prevBtn.classList.toggle('opacity-50', currentStep === 0);
            prevBtn.classList.toggle('cursor-not-allowed', currentStep === 0);

            if (currentStep === tutorialSteps.length - 1) {
                nextBtn.textContent = 'Final';
                nextBtn.innerHTML = `Final <i class="fas fa-check-circle ml-2"></i>`;
                nextBtn.disabled = false; // "Final" can still be clicked
            } else {
                nextBtn.textContent = 'Siguiente';
                nextBtn.innerHTML = `Siguiente <i class="fas fa-arrow-right ml-2"></i>`;
                nextBtn.disabled = false;
            }

            // Re-render MathJax content after injecting new HTML
            if (typeof MathJax !== 'undefined') {
                MathJax.typesetPromise();
            }

            // Specific logic for quiz step
            if (currentStep === 5) {
                document.getElementById('toggle-answers-btn').onclick = toggleQuizAnswers;
            } else if (currentStep === 6) {
                // Specific logic for random exercise generator step
                document.getElementById('generate-exercise-btn').onclick = generateRandomExercise;
                document.getElementById('show-random-answer-btn').onclick = toggleRandomAnswer;
                // Clear previous random exercise when navigating to this step
                document.getElementById('generated-trinomial').innerHTML = 'Presiona "Generar Nuevo Ejercicio"';
                document.getElementById('random-exercise-answer').style.display = 'none';
            }
        }

        function toggleQuizAnswers() {
            const answers = document.querySelectorAll('#quiz-answers .quiz-answer');
            const button = document.getElementById('toggle-answers-btn');
            const isHidden = answers[0].style.display === 'none' || answers[0].style.display === '';

            answers.forEach(answer => {
                answer.style.display = isHidden ? 'block' : 'none';
            });

            button.innerHTML = isHidden ? 'Ocultar Respuestas <i class="fas fa-eye-slash ml-2"></i>' : 'Mostrar/Ocultar Respuestas <i class="fas fa-eye ml-2"></i>';
        }

        let currentRandomN1 = 0;
        let currentRandomN2 = 0;

        function generateRandomExercise() {
            // Generate two random integers between -10 and 10 (inclusive)
            currentRandomN1 = Math.floor(Math.random() * 21) - 10; // -10 to 10
            currentRandomN2 = Math.floor(Math.random() * 21) - 10; // -10 to 10

            // Avoid generating trivial cases like N1=0 or N2=0 if possible, or make them rare
            // For simplicity, we'll allow them for now.

            const b = currentRandomN1 + currentRandomN2;
            const c = currentRandomN1 * currentRandomN2;

            let trinomial = `x^2`;
            if (b !== 0) {
                trinomial += (b > 0 ? ' + ' : ' - ') + (Math.abs(b) === 1 ? '' : Math.abs(b)) + 'x';
            }
            if (c !== 0) {
                trinomial += (c > 0 ? ' + ' : ' - ') + Math.abs(c);
            } else if (b === 0) { // Case like x^2 + 0x + 0
                trinomial = `x^2`;
            }

            document.getElementById('generated-trinomial').innerHTML = `$${trinomial}$`;
            document.getElementById('random-exercise-answer').style.display = 'none'; // Hide answer for new exercise
            document.getElementById('show-random-answer-btn').innerHTML = 'Mostrar/Ocultar Soluci√≥n <i class="fas fa-lightbulb ml-2"></i>';

            if (typeof MathJax !== 'undefined') {
                MathJax.typesetPromise();
            }
        }

        function toggleRandomAnswer() {
            const answerDiv = document.getElementById('random-exercise-answer');
            const button = document.getElementById('show-random-answer-btn');
            const isHidden = answerDiv.style.display === 'none' || answerDiv.style.display === '';

            if (currentRandomN1 === 0 && currentRandomN2 === 0 && document.getElementById('generated-trinomial').innerHTML === 'Presiona "Generar Nuevo Ejercicio"') {
                answerDiv.innerHTML = '<p>Genera un ejercicio primero.</p>';
            } else {
                let factor1 = `(x ${currentRandomN1 >= 0 ? '+' : '-'} ${Math.abs(currentRandomN1)})`;
                let factor2 = `(x ${currentRandomN2 >= 0 ? '+' : '-'} ${Math.abs(currentRandomN2)})`;

                // Handle cases where N1 or N2 is 0
                if (currentRandomN1 === 0) factor1 = 'x';
                if (currentRandomN2 === 0) factor2 = 'x';

                answerDiv.innerHTML = `<p>Soluci√≥n: $${factor1}${factor2}$</p>`;
            }

            answerDiv.style.display = isHidden ? 'block' : 'none';
            button.innerHTML = isHidden ? 'Ocultar Soluci√≥n <i class="fas fa-lightbulb-slash ml-2"></i>' : 'Mostrar/Ocultar Soluci√≥n <i class="fas fa-lightbulb ml-2"></i>';

            if (typeof MathJax !== 'undefined') {
                MathJax.typesetPromise();
            }
        }

        prevBtn.addEventListener('click', () => {
            if (currentStep > 0) {
                currentStep--;
                renderStep();
            }
        });

        nextBtn.addEventListener('click', () => {
            if (currentStep < tutorialSteps.length - 1) {
                currentStep++;
                renderStep();
            } else if (currentStep === tutorialSteps.length - 1) {
                // Optional: Add a "finished" message or redirect
                alert('¬°Has completado el curso! ¬°Felicidades! üéâ');
            }
        });
    </script>
</body>
</html>
